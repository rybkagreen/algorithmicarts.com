# Стратегический план эволюции виджетной аналитической платформы (2026)

## 1. Видение и ключевые принципы

Преобразовать статичную панель с виджетами в **адаптивную, интеллектуальную и композируемую рабочую среду**. Уйти от концепции "виджеты на доске" к концепции "живых модулей данных", которые:

*   **Самоадаптируются** под контекст (роль пользователя, размер экрана, критичность данных).
*   **Предсказывают** потребности и автоматически предлагают релевантные данные.
*   **Легко компонуются** пользователем без потери функциональности.

## 2. Пересмотренная дорожная карта: от функций к результатам

Вместо жестких спринтов по технологиям — фокус на поставке ценности и параллельных треках.

| **Фаза & Цель** | **Ключевые инициативы (что делаем)** | **Критерии успеха (как измеряем)** | **Технологический стэк / Подход (как реализуем)** |
| :--- | :--- | :--- | :--- |
| **Фаза 1: Фундамент (Q1)** <br> *Устранить "боль", обеспечить надежность.* | 1. **Исправление критических дефектов** (Currency, рассинхрон размеров). <br> 2. **Внедрение атомарного Design System** для виджетов (не просто сетка). <br> 3. **Инструменты для data-driven решений**: дашборд для сбора UI-метрик (клики, ошибки, время взаимодействия). | - 99% отображения виджетов без ошибок. <br> - Сокращение времени создания нового типа виджета на 60%. <br> - Наличие объективных метрик использования текущего интерфейса. | - **Module Federation / Webpack 5** для изоляции виджетов. <br> - **Storybook** с контракт-тестами для компонентов Design System. <br> - **Pionite или аналоги** для встраивания аналитики. |
| **Фаза 2: Интеллект & Адаптивность (Q2-Q3)** <br> *Сделать интерфейс "живым" и персональным.* | 1. **Контекстно-зависимые макеты**: движок правил для перекомпоновки контента на лету. <br> 2. **AI-ассистент для настройки**: NLP-интерфейс ("покажи доход по регионам за прошлый квардент"). <br> 3. **Прогнозная подгрузка данных** на основе паттернов поведения пользователя. | - Уменьшение шагов для настройки типового виджета на 70%. <br> - Рост вовлеченности (время, потраченное в дашборде) на 25%. <br> - Сокращение числа запросов к бэкенду за "холодными" данными на 40%. | - **Контейнерные запросы (CSS Container Queries)** и **логические свойства**. <br> - **LLM API (OpenAI / Anthropic)** для NLP-слоя. <br> - **Кеширование на грани (Edge)** с предсказательной логикой (Cloudflare Workers). |
| **Фаза 3: Композиция & Экосистема (Q4)** <br> *Превратить платформу в открытую экосистему.* | 1. **Low-code конструктор слотов**: пользователь сам определяет, какие блоки данных и в каком порядке отображать. <br> 2. **Магазин виджетов / шаблонов** с возможностью сторонних разработчиков. <br> 3. **Продвинутая коллаборация**: комментирование данных прямо в виджете, shared sessions. | - >30% пользователей создают кастомные композиции. <br> - Наличие сторонних виджетов в маркетплейсе. <br> - Сокращение времени на совместный анализ данных на 50%. | - **Платформа микрофронтендов**. <br> - **YJS / CRDT** для конфликтующей совместной работы. <br> - **Sandbox-среда** для выполнения стороннего кода виджетов. |

## 3. Ключевые технологические сдвиги (Что устарело / Что предлагается)

| **Область** | **В предыдущем плане (хорошо, но можно дальше)** | **Предложение для 2026 (более радикально и эффективно)** |
| :--- | :--- | :--- |
| **Архитектура** | Оптимизация рендеринга (React.memo, код-сплиттинг). | **Полная изоляция виджетов как микрофронтендов.** Позволяет независимое развертывание, отказоустойчивость и использование разных фреймворков внутри виджетов. |
| **Адаптивность** | Медиазапросы, контейнерные запросы. | **Движок адаптивных правил на основе AI.** Виджет анализирует свой контент, важность данных и доступное пространство, **сам выбирая оптимальный шаблон** (например, "график -> спарклайн -> простое значение KPI"). |
| **Персонализация** | Ролевой доступ, пользовательские настройки. | **Иммерсивные онбординг и адаптивный UI.** Система отслеживает цели пользователя (через явные сценарии или анализ действий) и **сама предлагает оптимальные наборы виджетов и их настройку**. |
| **Разработка** | Юнит-тесты, accessibility-тестирование. | **"Симулятор сценариев"** как часть пайплайна. Автоматический прогон виджетов через сотни сценариев (разные размеры, данные, состояния сети, скринридеры) перед релизом. |

## 4. Применительно к CurrencyWidget: Конкретные улучшения

### Фаза 1: Фундамент
- **Atomic Design System**: Создать атомарные компоненты для валютного виджета (валютный значок, трендовый индикатор, кнопка избранного)
- **Изоляция как микрофронтенд**: Виджет должен быть независимо развертываемым модулем
- **Сбор метрик**: Отслеживание кликов по валютам, времени загрузки, частоты обновления

### Фаза 2: Интеллект & Адаптивность
- **AI-адаптация**: Виджет анализирует поведение пользователя и автоматически показывает часто просматриваемые валюты
- **NLP-интерфейс**: Возможность ввести "покажи курсы EUR, GBP, JPY" через голосовой или текстовый интерфейс
- **Прогнозная загрузка**: Предзагрузка курсов часто просматриваемых валют

### Фаза 3: Композиция
- **Low-code конструктор**: Пользователь может настроить, какие поля отображать (курс, изменение, график, объем торгов)
- **Интеграция с маркетплейсом**: Возможность установки сторонних валютных виджетов
- **Совместная работа**: Возможность делиться выбранными настройками с командой

## 5. Метрики успеха: от технических к бизнесовым

*   **Бизнес-метрики**: Сокращение времени принятия решений (Time-to-Insight), рост конверсии для пользовательских сценариев, зависящих от дашборда.
*   **Метрики опыта (UX)**: Индекс пользовательской лояльности (User Effort Score), а не абстрактная "удовлетворенность". Глубина взаимодействия (число пользовательских настроек на виджет).
*   **Технические метрики**: Стабильность Core Web Vitals для каждого виджета, время восстановления после сбоя (MTTR), коэффициент переиспользования компонентов Design System (>80%).

## 6. Упреждающее управление рисками

*   **Риск**: Сложность и стоимость AI-решений.
    *   *Митчгация*: Начать с простых эвристических правил (набор `if-else`), собирать данные, затем внедрять ML-модели для наиболее ценных сценариев.
*   **Риск**: Фрагментация UX из-за микрофронтендов и сторонних виджетов.
    *   *Митчгация*: Жесткий контракт Design System (не только стили, но и паттерны поведения), обязательный ревью кода сторонних виджетов и их sandbox-режим.
*   **Риск**: Перегруженность интерфейса возможностями для новичков.
    *   *Митчгация*: Адаптивный интерфейс, который скрывает сложные функции (Low-code, AI) до тех пор, пока не будет выявлена готовность пользователя (анализ поведения).

## 7. Практические шаги для начала (ближайший месяц)

1. **Анализ текущего состояния**:
   - Провести аудит CurrencyWidget на предмет производительности, доступности и юзабилити
   - Настроить сбор аналитики по взаимодействию с виджетом

2. **Создание Design System**:
   - Определить атомарные компоненты для валютного виджета
   - Создать Storybook с документацией и тестами

3. **Подготовка микрофронтенд архитектуры**:
   - Изучить возможности Module Federation для изоляции виджета
   - Подготовить базовую инфраструктуру для независимого развертывания

4. **Исследование AI возможностей**:
   - Протестировать NLP API для интерпретации запросов типа "покажи курсы EUR, GBP"
   - Оценить возможность прогнозной загрузки данных

Этот план смещает фокус с **"как мы делаем"** на **"какую ценность получает пользователь и бизнес"**, используя технологии 2026 года как инструмент, а не как самоцель.